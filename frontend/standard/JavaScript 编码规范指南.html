<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript 语言规范 | 大道至简</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/1.ico">
    <meta name="description" content="南朝四百八十寺，多少楼台烟雨中。">
    
    <link rel="preload" href="/assets/css/0.styles.607c2be7.css" as="style"><link rel="preload" href="/assets/js/app.baa73b48.js" as="script"><link rel="preload" href="/assets/js/2.a224976c.js" as="script"><link rel="preload" href="/assets/js/19.999464c7.js" as="script"><link rel="prefetch" href="/assets/js/10.75728d5b.js"><link rel="prefetch" href="/assets/js/11.ccdef69c.js"><link rel="prefetch" href="/assets/js/12.53011037.js"><link rel="prefetch" href="/assets/js/13.420b2f65.js"><link rel="prefetch" href="/assets/js/14.68809c3a.js"><link rel="prefetch" href="/assets/js/15.623e5e8c.js"><link rel="prefetch" href="/assets/js/16.11558750.js"><link rel="prefetch" href="/assets/js/17.09467743.js"><link rel="prefetch" href="/assets/js/18.660cb575.js"><link rel="prefetch" href="/assets/js/20.2de73851.js"><link rel="prefetch" href="/assets/js/21.7de39897.js"><link rel="prefetch" href="/assets/js/22.a6ca1390.js"><link rel="prefetch" href="/assets/js/23.c194a35e.js"><link rel="prefetch" href="/assets/js/24.67e63edc.js"><link rel="prefetch" href="/assets/js/25.2d70b648.js"><link rel="prefetch" href="/assets/js/26.2f93805f.js"><link rel="prefetch" href="/assets/js/27.7e3d25c5.js"><link rel="prefetch" href="/assets/js/3.834ca199.js"><link rel="prefetch" href="/assets/js/4.ab781b15.js"><link rel="prefetch" href="/assets/js/5.1e9916b1.js"><link rel="prefetch" href="/assets/js/6.03db61b3.js"><link rel="prefetch" href="/assets/js/7.cf5f142e.js"><link rel="prefetch" href="/assets/js/8.ecde5f22.js"><link rel="prefetch" href="/assets/js/9.5ef4a4ae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.607c2be7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/1.jpg" alt="大道至简" class="logo"> <span class="site-name can-hide">大道至简</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  Web前端
</a></div><div class="nav-item"><a href="/nats/" class="nav-link">
  NATS-Streaming
</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">
  NodeJs
</a></div><div class="nav-item"><a href="/foo/" class="nav-link">
  Other
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools" class="dropdown-title"><span class="title">Tools</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tools" class="mobile-dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.html.cn/tool/html2js/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  html转js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.bitbug.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线制作ico图标
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.sojson.com/regex/generate" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线生成正则表达式
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.ofmonkey.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员在线工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.99cankao.com/numbers/random-number-generator.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线生成随机数
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  Web前端
</a></div><div class="nav-item"><a href="/nats/" class="nav-link">
  NATS-Streaming
</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">
  NodeJs
</a></div><div class="nav-item"><a href="/foo/" class="nav-link">
  Other
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools" class="dropdown-title"><span class="title">Tools</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tools" class="mobile-dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.html.cn/tool/html2js/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  html转js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.bitbug.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线制作ico图标
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.sojson.com/regex/generate" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线生成正则表达式
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.ofmonkey.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员在线工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.99cankao.com/numbers/random-number-generator.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线生成随机数
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端开发规范</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/standard/JavaScript 编码规范指南.html" class="active sidebar-link">JavaScript 语言规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#多级原型结构" class="sidebar-link">多级原型结构</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#方法定义" class="sidebar-link">方法定义</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#eval" class="sidebar-link">eval()</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#this" class="sidebar-link">this</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#for-in-循环" class="sidebar-link">for-in 循环</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#关联数组" class="sidebar-link">关联数组</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#多行字符串" class="sidebar-link">多行字符串</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#array-和-object-直接量" class="sidebar-link">Array 和 Object 直接量</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#修改内置对象的原型" class="sidebar-link">修改内置对象的原型</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#ie下的条件注释" class="sidebar-link">IE下的条件注释</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#命名" class="sidebar-link">命名</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#自定义-tostring-方法" class="sidebar-link">自定义 toString() 方法</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#延迟初始化" class="sidebar-link">延迟初始化</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#明确作用域" class="sidebar-link">明确作用域</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#括号" class="sidebar-link">括号</a></li><li class="sidebar-sub-header"><a href="/frontend/standard/JavaScript 编码规范指南.html#字符串" class="sidebar-link">字符串</a></li></ul></li><li><a href="/frontend/standard/精细化前端组件使用说明.html" class="sidebar-link">精细化前端组件</a></li><li><a href="/frontend/standard/HTML DIV+CSS命名规范.html" class="sidebar-link">HTML DIV+CSS命名规范</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>html</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/" aria-current="page" class="sidebar-link">HTML空格占位符</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/css/css.html" class="sidebar-link">css常规操作</a></li><li><a href="/frontend/css/flex.html" class="sidebar-link">flex布局</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/js/jsFoundation.html" class="sidebar-link">javascript基础</a></li><li><a href="/frontend/js/javascript.html" class="sidebar-link">javascript常规操作</a></li><li><a href="/frontend/js/vue.html" class="sidebar-link">vue-clock</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript-语言规范"><a href="#javascript-语言规范" class="header-anchor">#</a> JavaScript 语言规范</h1> <h1 id="变量"><a href="#变量" class="header-anchor">#</a> 变量</h1> <p>声明变量必须加上 var 关键字，当你没有写 var，变量就会暴露在全局上下文中，这样很可能会和现有变量冲突。
另外如果没有加上，很难明确该变量的作用域是什么，变量也很可能像在局部作用域中，很轻易地泄漏到 Document 或者 Window 中，所以务必用 var 去声明变量。</p> <h1 id="常量"><a href="#常量" class="header-anchor">#</a> 常量</h1> <p>常量的形式如：NAMES_LIKE_THIS，即使用大写字符，并用下划线分隔，你也可用 @const 标记来指明它是一个常量，但请永远不要使用 const 关键词。</p> <ul><li>对于基本类型的常量，只需转换命名。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
* The number of seconds in a minute.
* @type {number}
*/</span>
goog<span class="token punctuation">.</span>example<span class="token punctuation">.</span><span class="token constant">SECONDS_IN_A_MINUTE</span> <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>对于非基本类型，使用 @const 标记。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
* The number of seconds in each of the given units.
* @type {Object.&lt;number&gt;}
* @const
*/</span>
goog<span class="token punctuation">.</span>example<span class="token punctuation">.</span><span class="token constant">SECONDS_TABLE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token literal-property property">minute</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
<span class="token literal-property property">hour</span><span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span>
<span class="token literal-property property">day</span><span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这标记告诉编译器它是常量，至于关键词 const，因为 IE 不能识别，所以不要使用。</p> <h1 id="分号"><a href="#分号" class="header-anchor">#</a> 分号</h1> <p>总是使用分号，如果仅依靠语句间的隐式分隔，有时会很麻烦，你自己更能清楚哪里是语句的起止，而且有些情况下, 漏掉分号会很危险：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.</span>
<span class="token class-name">MyClass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>  <span class="token comment">// No semicolon here.</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// Some initialization code wrapped in a function to create a scope for locals.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string-property property">'i'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token string-property property">'j'</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>  <span class="token comment">// No semicolon here.</span>

<span class="token comment">// 2.  Trying to do one thing on Internet Explorer and another on Firefox.</span>
<span class="token comment">// I know you'd never write code like this, but throw me a bone.</span>
<span class="token punctuation">[</span>normalVersion<span class="token punctuation">,</span> ffVersion<span class="token punctuation">]</span><span class="token punctuation">[</span>isIE<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token constant">THINGS_TO_EAT</span> <span class="token operator">=</span> <span class="token punctuation">[</span>apples<span class="token punctuation">,</span> oysters<span class="token punctuation">,</span> sprayOnCheese<span class="token punctuation">]</span>  <span class="token comment">// No semicolon here.</span>

<span class="token comment">// 3. conditional execution a la bash</span>
<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token function">resultOfOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>JavaScript 的语句以分号作为结束符，除非可以非常准确推断某结束位置才会省略分号。上面的几个例子产出错误，均是在语句中声明了函数/对象/数组直接量，但闭括号(‘}’或’]’)并不足以表示该语句的结束。在 JavaScript 中, 只有当语句后的下一个符号是后缀或括号运算符时，才会认为该语句的结束。遗漏分号有时会出现很奇怪的结果，所以确保语句以分号结束。</p> <h1 id="嵌套函数"><a href="#嵌套函数" class="header-anchor">#</a> 嵌套函数</h1> <p>可以使用,嵌套函数很有用，比如，减少重复代码，隐藏帮助函数等。没什么其他需要注意的地方，随意使用。</p> <h1 id="块内函数声明"><a href="#块内函数声明" class="header-anchor">#</a> 块内函数声明</h1> <p>不要在块内声明一个函数，不要写成：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>虽然很多 JS 引擎都支持块内声明函数，但它不属于 ECMAScript 规范 (见 ECMA-262, 第13和14条)。各个浏览器糟糕的实现相互不兼容，有些也与未来 ECMAScript 草案相违背。ECMAScript 只允许在脚本的根语句或函数中声明函数。如果确实需要在块中定义函数，建议使用函数表达式来初始化变量：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="异常"><a href="#异常" class="header-anchor">#</a> 异常</h1> <p>可以使用，你在写一个比较复杂的应用时，不可能完全避免不会发生任何异常，大胆去用吧。</p> <h1 id="自定义异常"><a href="#自定义异常" class="header-anchor">#</a> 自定义异常</h1> <p>可以使用，有时发生异常了, 但返回的错误信息比较奇怪, 也不易读. 虽然可以将含错误信息的引用对象或者可能产生错误的完整对象传递过来, 但这样做都不是很好, 最好还是自定义异常类, 其实这些基本上都是最原始的异常处理技巧.
所以在适当的时候使用自定义异常。</p> <h1 id="标准特性"><a href="#标准特性" class="header-anchor">#</a> 标准特性</h1> <p>总是优于非标准特性，最大化可移植性和兼容性, 尽量使用标准方法而不是用非标准方法, (比如,优先用string.charAt(3) 而不用 string[3] ,通过 DOM 原生函数访问元素, 而不是使用应用封装好的快速接口。</p> <h1 id="封装基本类型"><a href="#封装基本类型" class="header-anchor">#</a> 封装基本类型</h1> <p>不要使用，没有任何理由去封装基本类型, 另外还存在一些风险:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Shows 'hi'.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>除非明确用于类型转换, 其他情况请千万不要这样做！</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This will never be alerted.</span>
<span class="token punctuation">}</span>
<span class="token keyword">typeof</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'boolean'</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">;</span>
</code></pre></div><p>有时用作 number, string 或 boolean时, 类型的转换会非常实用.</p> <h2 id="多级原型结构"><a href="#多级原型结构" class="header-anchor">#</a> 多级原型结构</h2> <ul><li>不是首选</li></ul> <p>多级原型结构是指 JavaScript 中的继承关系. 当你自定义一个D类, 且把B类作为其原型, 那么这就获得了一个多级原型结构. 这些原型结构会变得越来越复杂!使用the Closure 库中的 goog.inherits() 或其他类似的用于继承的函数, 会是更好的选择.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
goog<span class="token punctuation">.</span><span class="token function">base</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
goog<span class="token punctuation">.</span><span class="token function">inherits</span><span class="token punctuation">(</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">D</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="方法定义"><a href="#方法定义" class="header-anchor">#</a> 方法定义</h2> <p>Foo.prototype.bar = function() { ... };</p> <p>有很多方法可以给构造器添加方法或成员, 我们更倾向于使用如下的形式:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <p>可以, 但小心使用.</p> <p>闭包也许是 JS 中最有用的特性了.
有一份比较好的介绍闭包原理的文档.</p> <p>有一点需要牢记, 闭包保留了一个指向它封闭作用域的指针, 所以, 在给 DOM 元素附加闭包时, 很可能会产生循环引用, 进一步导致内存泄漏. 比如下面的代码:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
element<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* uses a and b */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里, 即使没有使用 element, 闭包也保留了 element,a 和 b 的引用, . 由于 element 也保留了对闭包的引用, 这就产生了循环引用, 这就不能被 GC 回收.
这种情况下, 可将代码重构为:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
element<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* uses a and b */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="eval"><a href="#eval" class="header-anchor">#</a> eval()</h2> <p>只用于解析序列化串 (如: 解析 RPC 响应)</p> <p>eval() 会让程序执行的比较混乱, 当 eval() 里面包含用户输入的话就更加危险.
可以用其他更佳的, 更清晰, 更安全的方式写你的代码, 所以一般情况下请不要使用 eval().
当碰到一些需要解析序列化串的情况下(如, 计算 RPC 响应), 使用 eval 很容易实现.</p> <p>解析序列化串是指将字节流转换成内存中的数据结构. 比如, 你可能会将一个对象输出成文件形式:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>users <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Eric'</span><span class="token punctuation">,</span>
<span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">37824</span><span class="token punctuation">,</span>
<span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'jellyvore@myway.com'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xtof'</span><span class="token punctuation">,</span>
<span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">31337</span><span class="token punctuation">,</span>
<span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'b4d455h4x0r@google.com'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>很简单地调用 eval 后, 把表示成文件的数据读取回内存中.</p> <p>类似的, eval() 对 RPC 响应值进行解码. 例如, 你在使用 XMLHttpRequest发出一个 RPC 请求后, 通过 eval () 将服务端的响应文本转成 JavaScript 对象:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> userOnline <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token string">'nusrat'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://chat.google.com/isUserOnline?user='</span> <span class="token operator">+</span> user<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Server returns:</span>
<span class="token comment">// userOnline = true;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">eval</span><span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// userOnline is now true.</span>
</code></pre></div><p>with() {}
不要使用</p> <p>使用 with 让你的代码在语义上变得不清晰. 因为 with 的对象, 可能会与局部变量产生冲突, 从而改变你程序原本的用义.
下面的代码是干嘛的?</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">with</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>答案: 任何事. 局部变量 x 可能被 foo 的属性覆盖, 当它定义一个 setter 时, 在赋值 3 后会执行很多其他代码.
所以不要使用 with 语句.</p> <h2 id="this"><a href="#this" class="header-anchor">#</a> this</h2> <p>仅在对象构造器, 方法, 闭包中使用.</p> <p>this 的语义很特别. 有时它引用一个全局对象(大多数情况下), 调用者的作用域(使用eval时), DOM 树中的节点(添加事件处理函数时), 新创建的对象(使用一个构造器), 或者其他对象(如果函数被call() 或 apply()).</p> <p>使用时很容易出错, 所以只有在下面两个情况时才能使用:</p> <p>在构造器中
对象的方法(包括创建的闭包)中</p> <h2 id="for-in-循环"><a href="#for-in-循环" class="header-anchor">#</a> for-in 循环</h2> <p>只用于 object/map/hash 的遍历</p> <p>对 Array 用 for-in 循环有时会出错. 因为它并不是从 0 到length - 1 进行遍历, 而是所有出现在对象及其原型链的键值. 下面就是一些失败的使用案例:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">printArray</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">printArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This works.</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is wrong.</span>

a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is wrong.</span>

a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>buhu <span class="token operator">=</span> <span class="token string">'wine'</span><span class="token punctuation">;</span>
<span class="token function">printArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is wrong again.</span>

a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token function">printArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is wrong again.</span>
</code></pre></div><p>而遍历数组通常用最普通的 for 循环.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">printArray</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> l <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="关联数组"><a href="#关联数组" class="header-anchor">#</a> 关联数组</h2> <p>永远不要使用 Array 作为 map/hash/associative 数组.</p> <p>数组中不允许使用非整型作为索引值, 所以也就不允许用关联数组. 而取代它使用 Object 来表示 map/hash 对象.
Array 仅仅是扩展自 Object (类似于其他 JS 中的对象, 就像Date, RegExp 和 String)一样来使用.</p> <h2 id="多行字符串"><a href="#多行字符串" class="header-anchor">#</a> 多行字符串</h2> <p>不要使用</p> <p>不要这样写长字符串:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> myString <span class="token operator">=</span> <span class="token string">'A rather long string of English text, an error message \
actually that just keeps going and going -- an error \
message to make the Energizer bunny blush (right through \
those Schwarzenegger shades)! Where was I? Oh yes, \
you\'ve got an error and all the extraneous whitespace is \
just gravy.  Have a nice day.'</span><span class="token punctuation">;</span>
</code></pre></div><p>在编译时, 不能忽略行起始位置的空白字符; “\” 后的空白字符会产生奇怪的错误; 虽然大多数脚本引擎支持这种写法, 但它不是 ECMAScript 的标准规范.</p> <h2 id="array-和-object-直接量"><a href="#array-和-object-直接量" class="header-anchor">#</a> Array 和 Object 直接量</h2> <p>使用</p> <p>使用 Array 和 Object 语法, 而不使用Array 和 Object 构造器.</p> <p>使用 Array 构造器很容易因为传参不恰当导致错误.</p> <div class="language-javascipt extra-class"><pre class="language-text"><code>// Length is 3.
var a1 = new Array(x1, x2, x3);

// Length is 2.
var a2 = new Array(x1, x2);

// If x1 is a number and it is a natural number the length will be x1.
// If x1 is a number but not a natural number this will throw an exception.
// Otherwise the array will have one element with x1 as its value.
var a3 = new Array(x1);

// Length is 0.
var a4 = new Array();
</code></pre></div><p>如果传入一个参数而不是2个参数, 数组的长度很有可能就不是你期望的数值了.</p> <p>为了避免这些歧义, 我们应该使用更易读的直接量来声明.</p> <div class="language-javscript extra-class"><pre class="language-text"><code>var a = [x1, x2, x3];
var a2 = [x1, x2];
var a3 = [x1];
var a4 = [];
</code></pre></div><p>虽然 Object 构造器没有上述类似的问题, 但鉴于可读性和一致性考虑, 最好还是在字面上更清晰地指明.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
o2<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
o2<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
o2<span class="token punctuation">[</span><span class="token string">'strange key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><p>应该写成:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token string-property property">'strange key'</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="修改内置对象的原型"><a href="#修改内置对象的原型" class="header-anchor">#</a> 修改内置对象的原型</h2> <p>不要</p> <p>千万不要修改内置对象, 如 Object.prototype 和Array.prototype 的原型. 而修改内置对象, 如 Function.prototype 的原型, 虽然少危险些, 但仍会导致调试时的诡异现象.
所以也要避免修改其原型.</p> <h2 id="ie下的条件注释"><a href="#ie下的条件注释" class="header-anchor">#</a> IE下的条件注释</h2> <p>不要使用</p> <p>不要这样子写:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/*@cc_on if (@_jscript) { return 2* @*/</span>  <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">/*@ } @*/</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>条件注释妨碍自动化工具的执行, 因为在运行时, 它们会改变 JavaScript 语法树.</p> <h1 id="javascript-编码风格"><a href="#javascript-编码风格" class="header-anchor">#</a> JavaScript 编码风格</h1> <h2 id="命名"><a href="#命名" class="header-anchor">#</a> 命名</h2> <p>通常, 使用 functionNamesLikeThis,variableNamesLikeThis, ClassNamesLikeThis,EnumNamesLikeThis, methodNamesLikeThis,和 SYMBOLIC_CONSTANTS_LIKE_THIS.</p> <p>属性和方法</p> <p>文件或类中的 私有 属性, 变量和方法名应该以下划线 “_” 开头.
保护 属性, 变量和方法名不需要下划线开头, 和公共变量名一样.
更多有关 私有 和 保护的信息见,visibility.</p> <p>方法和函数参数</p> <p>可选参数以 opt_ 开头.</p> <p>函数的参数个数不固定时, 应该添加最后一个参数 var_args 为参数的个数. 你也可以不设置
var_args而取代使用 arguments.</p> <p>可选和可变参数应该在@param 标记中说明清楚. 虽然这两个规定对编译器没有任何影响, 但还是请尽量遵守</p> <p>Getters 和 Setters</p> <p>Getters 和 setters 并不是必要的. 但只要使用它们了, 就请将 getters 命名成 getFoo() 形式,将 setters 命名成 setFoo(value) 形式. (对于布尔类型的 getters, 使用 isFoo() 也可.)</p> <p>命名空间</p> <p>JavaScript 不支持包和命名空间.</p> <p>不容易发现和调试全局命名的冲突, 多个系统集成时还可能因为命名冲突导致很严重的问题.
为了提高 JavaScript 代码复用率, 我们遵循下面的约定以避免冲突.</p> <p>为全局代码使用命名空间</p> <p>在全局作用域上, 使用一个唯一的, 与工程/库相关的名字作为前缀标识. 比如, 你的工程是 “Project Sloth”, 那么命名空间前缀可取为 sloth.*.</p> <h2 id="自定义-tostring-方法"><a href="#自定义-tostring-方法" class="header-anchor">#</a> 自定义 toString() 方法</h2> <p>应该总是成功调用且不要抛异常.</p> <p>可自定义 toString() 方法, 但确保你的实现方法满足: (1) 总是成功 (2) 没有其他负面影响.
如果不满足这两个条件, 那么可能会导致严重的问题, 比如, 如果 toString() 调用了包含 assert 的函数,assert 输出导致失败的对象, 这在 toString() 也会被调用.</p> <h2 id="延迟初始化"><a href="#延迟初始化" class="header-anchor">#</a> 延迟初始化</h2> <p>可以</p> <p>没必要在每次声明变量时就将其初始化.</p> <h2 id="明确作用域"><a href="#明确作用域" class="header-anchor">#</a> 明确作用域</h2> <p>任何时候都需要</p> <p>任何时候都要明确作用域 – 提高可移植性和清晰度. 例如, 不要依赖于作用域链中的 window 对象.
可能在其他应用中, 你函数中的 window 不是指之前的那个窗口对象.</p> <h2 id="括号"><a href="#括号" class="header-anchor">#</a> 括号</h2> <p>只在需要的时候使用</p> <p>不要滥用括号, 只在必要的时候使用它.</p> <p>对于一元操作符(如delete, typeof 和 void ),或是在某些关键词(如 return, throw, case, new )之后, 不要使用括号.</p> <h2 id="字符串"><a href="#字符串" class="header-anchor">#</a> 字符串</h2> <p>使用 ‘ 优于 ”</p> <p>单引号 (‘) 优于双引号 (“).
当你创建一个包含 HTML 代码的字符串时就知道它的好处了.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/frontend/standard/精细化前端组件使用说明.html">
        精细化前端组件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.baa73b48.js" defer></script><script src="/assets/js/2.a224976c.js" defer></script><script src="/assets/js/19.999464c7.js" defer></script>
  </body>
</html>
